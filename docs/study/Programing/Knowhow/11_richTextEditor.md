# OSS を用いてリッチテキストエディタを導入する

## なぜ書くか

Java+jsp へ現行からの再構築を行う PJ でリッチテキストエディタを採用する場面があった。<br/>
OSS を採用して実現したが、その際にどのような比較検討して採用に至ったかを備忘としてまとめておくため。

## リッチテキストエディタとは

そもそもリッチテキストエディタとは、ユーザーにリッチテキスト形式(word のように文字の色付けや**_装飾_**が可能な形式)で入力させ、それを Web に表示することができるものである。<br/>
かなり自由に装飾ができる利点がある一方で、自分たちで一から作ろうとなると XSS などのセキュリティ面の対策が面倒であったりする。<br/>
本 PJ で使用する FW 側ではリッチテキストエディタに対応していないため、OSS を使用して実現することになった。

## 観点

リッチテキストエディタを採用するにあたり、OSS の候補はいくつかあるため、以下の観点に沿って検討を行った。<br/>
以下観点は通常 OSS を採用する際の観点も含んでいる。

1. 商用利用可能で無償であること。ライセンスに制約がないか。(PJ 要望)
2. 機能面で現行からあまり落ちないこと。見た目に差異が少ない(PJ 要望)
3. セキュリティ面での対策がなされていること。
4. 該当の OSS の採用実績が豊富であること。
5. OSS が頻繁にメンテされていること。
6. VanillaJS で使えること。
7. 公式で拡張可能なプラグインなどはあるか。拡張が容易か。

## 比較・結果

凡例
●: 十分、△:不足あり、×:満たさない<br/>
各 OSS のリンクは[参考](#参考)に乗せている

|           | 1                  | 2                                         | 3                    | 4   | 5   | 6   | 7    | その他                                                                 |
| --------- | ------------------ | ----------------------------------------- | -------------------- | --- | --- | --- | ---- | ---------------------------------------------------------------------- |
| Quill     | ●<br/>BSD-3-Clause | ●(一部機能なし)                           | ●(基本的な XSS 対策) | ●   | ●   | ●   | ●    | GitHub Star 数多め。企業運営。Delta 形式という Json ベースの形式で保存 |
| Jodit     | ●<br/>MIT          | ●(一部機能なし)                           | ●(基本的な XSS 対策) | △   | ●   | ●   | 不明 | HTML 形式での保存。機能はかなり豊富。                                  |
| Trix      | ●<br/>MIT          | △                                         | ●                    | ●   | ●   | ●   | ×    | -                                                                      |
| Editor.js | ●<br/>Apache-2.0   | ×<br/>(機能少ないのと Toolbar 形式でない) | 不明                 | ●   | ●   | ●   | ●    | Json 形式での保存、                                                    |
| TinyMCE   | ×(有償)            | ●                                         | ●                    | ●   | ●   | ●   | ●    | 従量課金形式。企業運営。CKEditor5 もほぼ同様                           |

上記比較より Quill を採用することにした。

## 反省

社内ツールでもリッチテキストエディタを使用しているため、まずはそこに話を聞きに行けばよかった。<br/>
一からすべて考える必要はなかった。

## 参考

- [Quill](https://quilljs.com/)
- [Jodit](https://xdsoft.net/jodit/)
- [Editor.js](https://editorjs.io/)
- [Trix](https://trix-editor.org/)
- [TinyMCE](https://www.tiny.cloud/)
